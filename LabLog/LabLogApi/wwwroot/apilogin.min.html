<!DOCTYPE html><html><head><link rel=stylesheet href=lib/bootstrap/dist/css/bootstrap.css><link rel=stylesheet href=lib/font-awesome/css/font-awesome.css><link rel=stylesheet href=lib/durandal/css/durandal.css><link rel=stylesheet href=css/starterkit.css></head><body><div id=applicationHost></div><script src=lib/requirejs/require.js data-main=apps/apilogin/main></script><script>var auth2=auth2||{};(function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src="https://plus.google.com/js/client:plusone.js?onload=startApp";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)})()</script></body><script>function startApp(){gapi.load("auth2",function(){console.log("App Starting");gapi.auth2.init({client_id:"552307546414-h58bp8klvjhlqua4u7t1d0jjl3tjr7i5.apps.googleusercontent.com",cookiepolicy:"single_host_origin",ux_mode:"redirect",redirect_uri:"localhost:4724/anotherlogin",fetch_basic_profile:!0,scope:"https://www.googleapis.com/auth/plus.login"}).then(function(){console.log("init");auth2=gapi.auth2.getAuthInstance();auth2.then(function(){var n=function(){helper.onSignInCallback(auth2.currentUser.get().getAuthResponse())};helper.people(n)})})})}var helper=function(){var n=undefined;return{disconnectServer:function(){$.ajax({type:"POST",url:$(location).attr("origin")+"/disconnect",async:!1,success:function(n){console.log("revoke response: "+n);$("#authOps").hide();$("#profile").empty();$("#visiblePeople").empty();$("#authResult").empty();$("#gConnect").show()},error:function(n){console.log(n)}})},connectServer:function(n){console.log(n);$.ajax({type:"POST",url:$(location).attr("origin")+"/connect?state={{ STATE }}",contentType:"application/octet-stream; charset=utf-8",success:function(n){console.log(n);helper.people();onSignInCallback(auth2.currentUser.get().getAuthResponse())},processData:!1,data:n})},people:function(n,t){n=n||function(n){helper.appendCircled(n)};$.ajax({type:"GET",url:$(location).attr("origin")+"/people",contentType:"application/octet-stream; charset=utf-8",success:n,error:t,processData:!1})},appendCircled:function(n){$("#visiblePeople").empty();$("#visiblePeople").append("Number of people visible to this app: "+n.totalItems+"<br/>");for(var t in n.items)person=n.items[t],$("#visiblePeople").append('<img src="'+person.image.url+'">')}}}()</script></html>